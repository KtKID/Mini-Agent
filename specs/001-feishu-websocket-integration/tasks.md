# ä»»åŠ¡æ¸…å•ï¼šé£ä¹¦ Skill é›†æˆ

**è¾“å…¥**: æ¥è‡ª `/specs/001-feishu-websocket-integration/` çš„è®¾è®¡æ–‡æ¡£
**å‰ç½®æ¡ä»¶**: plan.md (å¿…å¡«), spec.md (å¿…å¡«)

**ç»„ç»‡**: ä»»åŠ¡æŒ‰ç”¨æˆ·æ•…äº‹åˆ†ç»„ï¼Œä»¥å®ç°æ¯ä¸ªæ•…äº‹çš„ç‹¬ç«‹å®ç°å’Œæµ‹è¯•ã€‚

## æ ¼å¼: `[ID] [P?] [Story] Description`

- **[P]**: å¯å¹¶è¡Œè¿è¡Œï¼ˆä¸åŒæ–‡ä»¶ï¼Œæ— ä¾èµ–ï¼‰
- **[Story]**: æ­¤ä»»åŠ¡å±äºå“ªä¸ªç”¨æˆ·æ•…äº‹ (ä¾‹å¦‚ US1, US2, US3)
- æè¿°ä¸­åŒ…å«å‡†ç¡®çš„æ–‡ä»¶è·¯å¾„

---

## é˜¶æ®µ 1: é€šç”¨é•¿è¿æ¥æ¡†æ¶ (é€šç”¨åŸºç¡€è®¾æ–½)

**ç›®çš„**: å®ç°é€šç”¨çš„é•¿è¿æ¥å¹³å°æ¡†æ¶ï¼Œæ”¯æŒå¯æ’æ‹”çš„ Skill æ³¨å†Œ

- [X] T001 åˆ›å»º `mini_agent/long_connection/` ç›®å½•ç»“æ„ âœ…
- [X] T002 [P] åœ¨ `mini_agent/long_connection/base.py` ä¸­å®ç° LongConnectionPlatform æŠ½è±¡åŸºç±» âœ…
- [X] T003 [P] åœ¨ `mini_agent/long_connection/registry.py` ä¸­å®ç° LongConnectionRegistry å•ä¾‹ âœ…
- [X] T004 åœ¨ `mini_agent/long_connection/__init__.py` ä¸­å¯¼å‡ºæ¨¡å— âœ…

---

## é˜¶æ®µ 2: Agent é›†æˆ (ä¿®æ”¹ç°æœ‰ä»£ç )

**ç›®çš„**: ä¿®æ”¹ç°æœ‰ Agent å’Œ CLI ä»¥æ”¯æŒé•¿è¿æ¥ Skills

- [X] T005 åœ¨ `mini_agent/agent.py` ä¸­æ·»åŠ  LongConnectionRegistry äº‹ä»¶å¤„ç†å™¨ âœ…
- [X] T006 åœ¨ `mini_agent/cli.py` ä¸­æ·»åŠ  Skill åŠ è½½é€»è¾‘ï¼ˆæ ¹æ®é…ç½®å¯ç”¨/ç¦ç”¨ï¼‰âœ…
- [X] T007 æ·»åŠ  LongConnectionRegistry åˆå§‹åŒ–æ—¥å¿— âœ…

---

## é˜¶æ®µ 3: é£ä¹¦ Skill åŸºç¡€ (å¯æ’æ‹”æ¨¡å—)

**ç›®çš„**: å®ç° FeishuSkill æ¨¡å—ï¼Œå¯é€šè¿‡é…ç½®å¯ç”¨/ç¦ç”¨

- [X] T008 åˆ›å»º `mini_agent/skills/feishu_skill/` ç›®å½•ç»“æ„ âœ…
- [X] T009 [P] åœ¨ `mini_agent/skills/feishu_skill/config.py` ä¸­å®ç° FeishuConfig (æ”¯æŒ enabled å¼€å…³) âœ…
- [X] T010 [P] åœ¨ `mini_agent/skills/feishu_skill/skill.yaml` ä¸­å®šä¹‰ Skill å…ƒæ•°æ® âœ…
- [X] T011 [P] åœ¨ `mini_agent/skills/feishu_skill/__init__.py` ä¸­å®ç° FeishuSkill ç±»ï¼ˆå®ç° LongConnectionPlatformï¼‰âœ…
- [X] T012 å®ç° FeishuSkill.connect() æ–¹æ³• - å»ºç«‹ WebSocket è¿æ¥ âœ…

---

## é˜¶æ®µ 4: ç”¨æˆ·æ•…äº‹ 1 - åŸºç¡€å¯¹è¯åŠŸèƒ½ (ä¼˜å…ˆçº§: P1) ğŸ¯ MVP

**ç›®æ ‡**: å®ç°ç”¨æˆ·ä¸ bot çš„åŸºæœ¬æ–‡æœ¬æ¶ˆæ¯äº¤æ¢

**ç‹¬ç«‹æµ‹è¯•**: å‘é£ä¹¦ä¸­çš„ bot å‘é€æ–‡æœ¬æ¶ˆæ¯å¹¶éªŒè¯æ”¶åˆ°æ–‡æœ¬å›å¤

### ç”¨æˆ·æ•…äº‹ 1 å®ç°

- [X] T013 [P] [US1] åœ¨ `mini_agent/skills/feishu_skill/ws_client.py` ä¸­å®ç° WebSocket è¿æ¥é€»è¾‘ âœ…
- [X] T014 [US1] åœ¨ `mini_agent/skills/feishu_skill/event_handler.py` ä¸­å®ç°æ¶ˆæ¯äº‹ä»¶è§£æ âœ…
- [X] T015 [US1] åœ¨ `mini_agent/skills/feishu_skill/message.py` ä¸­å®ç°æ–‡æœ¬æ¶ˆæ¯å‘é€ âœ…
- [X] T016 [US1] åœ¨ `mini_agent/skills/feishu_skill/session_manager.py` ä¸­å®ç°ä¼šè¯ç®¡ç† âœ…
- [X] T017 [US1] åœ¨ `mini_agent/skills/feishu_skill/__init__.py` ä¸­å®ç°æ¶ˆæ¯å›è°ƒæœºåˆ¶ âœ…
- [X] T018 [US1] æ·»åŠ è¿æ¥çŠ¶æ€å’Œæ¶ˆæ¯äº‹ä»¶æ—¥å¿—è®°å½• âœ…

**æ£€æŸ¥ç‚¹**: æ­¤æ—¶ï¼Œç”¨æˆ·æ•…äº‹ 1 åº”å®Œå…¨åŠŸèƒ½åŒ–å¹¶å¯ç‹¬ç«‹æµ‹è¯•

---

## é˜¶æ®µ 5: ç”¨æˆ·æ•…äº‹ 2 - å¤šç”¨æˆ·ä¼šè¯éš”ç¦» (ä¼˜å…ˆçº§: P2)

**ç›®æ ‡**: æ¯ä¸ªé£ä¹¦ç”¨æˆ·çš„å¯¹è¯å†å²ç‹¬ç«‹ï¼Œä¸å—å…¶ä»–ç”¨æˆ·å¹²æ‰°

**ç‹¬ç«‹æµ‹è¯•**: ä¸¤ä¸ªç”¨æˆ·åŒæ—¶å‘é€æ¶ˆæ¯ï¼ŒéªŒè¯æ¯ä¸ªæ”¶åˆ°åŸºäºè‡ªå·±å¯¹è¯å†å²çš„å›å¤

### ç”¨æˆ·æ•…äº‹ 2 å®ç°

- [ ] T019 [P] [US2] åœ¨ `mini_agent/skills/feishu_skill/session_manager.py` ä¸­å®ç° per-user Agent å®ä¾‹åˆ›å»º
- [ ] T020 [US2] åœ¨ `mini_agent/skills/feishu_skill/session_manager.py` ä¸­å®ç°ä¼šè¯ä¸Šä¸‹æ–‡ä¿ç•™
- [ ] T021 [US2] åœ¨ `mini_agent/skills/feishu_skill/session_manager.py` ä¸­å®ç°å¤šä¼šè¯å¹¶å‘å¤„ç†

**æ£€æŸ¥ç‚¹**: æ­¤æ—¶ï¼Œç”¨æˆ·æ•…äº‹ 1 å’Œ 2 éƒ½åº”ç‹¬ç«‹å·¥ä½œ

---

## é˜¶æ®µ 6: ç”¨æˆ·æ•…äº‹ 3 - è¿æ¥å¼¹æ€§ (ä¼˜å…ˆçº§: P3)

**ç›®æ ‡**: ç½‘ç»œä¸­æ–­åè‡ªåŠ¨é‡è¿ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„

**ç‹¬ç«‹æµ‹è¯•**: æ¨¡æ‹Ÿ WebSocket æ–­å¼€ï¼ŒéªŒè¯æœåŠ¡è‡ªåŠ¨é‡è¿å¹¶æ¢å¤å¤„ç†

### ç”¨æˆ·æ•…äº‹ 3 å®ç°

- [ ] T022 [P] [US3] åœ¨ `mini_agent/skills/feishu_skill/ws_client.py` ä¸­å®ç°æŒ‡æ•°é€€é¿é‡è¿
- [ ] T023 [US3] åœ¨ `mini_agent/skills/feishu_skill/ws_client.py` ä¸­å®ç°å¿ƒè·³æ£€æµ‹
- [ ] T024 [US3] åœ¨ `mini_agent/skills/feishu_skill/__init__.py` ä¸­å®ç°é‡è¿çŠ¶æ€ç®¡ç†
- [ ] T025 [US3] æ·»åŠ é‡è¿äº‹ä»¶æ—¥å¿—è®°å½•

**æ£€æŸ¥ç‚¹**: æ­¤æ—¶ï¼Œæ‰€æœ‰ç”¨æˆ·æ•…äº‹åº”ç‹¬ç«‹åŠŸèƒ½åŒ–

---

## é˜¶æ®µ 7: ç”¨æˆ·æ•…äº‹ 4 - ä¼šè¯æ¸…ç† (ä¼˜å…ˆçº§: P4)

**ç›®æ ‡**: è‡ªåŠ¨æ¸…ç†è¶…æ—¶ä¸æ´»è·ƒä¼šè¯ï¼Œé‡Šæ”¾ç³»ç»Ÿèµ„æº

**ç‹¬ç«‹æµ‹è¯•**: åˆ›å»ºä¼šè¯ï¼Œç­‰å¾…è¶…æ—¶ï¼ŒéªŒè¯ä¼šè¯ä»å†…å­˜ä¸­ç§»é™¤

### ç”¨æˆ·æ•…äº‹ 4 å®ç°

- [ ] T026 [P] [US4] åœ¨ `mini_agent/skills/feishu_skill/session_manager.py` ä¸­å®ç°ä¼šè¯è¶…æ—¶æ£€æµ‹
- [ ] T027 [US4] åœ¨ `mini_agent/skills/feishu_skill/session_manager.py` ä¸­å®ç°å®šæœŸæ¸…ç†ä»»åŠ¡

**æ£€æŸ¥ç‚¹**: æ‰€æœ‰ç”¨æˆ·æ•…äº‹ç°åº”ç‹¬ç«‹å®Œæ•´

---

## é˜¶æ®µ 8: ç”¨æˆ·æ•…äº‹ 5 - Skill å¯æ’æ‹”æ€§ (ä¼˜å…ˆçº§: P1)

**ç›®æ ‡**: ç¡®ä¿ FeishuSkill å¯ä»¥é€šè¿‡é…ç½®å¯ç”¨/ç¦ç”¨

**ç‹¬ç«‹æµ‹è¯•**: ç¦ç”¨é…ç½®åè¿è¡Œ Agentï¼ŒéªŒè¯åŸæœ‰ CLI åŠŸèƒ½å®Œå…¨æ­£å¸¸

### ç”¨æˆ·æ•…äº‹ 5 å®ç°

- [ ] T028 [P] [US5] åœ¨ `mini_agent/skills/feishu_skill/__init__.py` ä¸­å®ç° enabled æ£€æŸ¥
- [ ] T029 [US5] åœ¨ `mini_agent/cli.py` ä¸­å®ç°æ¡ä»¶åŠ è½½ï¼ˆenabled: true æ—¶æ‰åŠ è½½ï¼‰
- [ ] T030 [US5] éªŒè¯ç¦ç”¨æ—¶ Agent åŸæœ‰åŠŸèƒ½æ­£å¸¸
- [ ] T031 [US5] éªŒè¯åˆ é™¤æ¨¡å—å Agent æ— é”™è¯¯å¯åŠ¨

---

## é˜¶æ®µ 9: å®Œå–„ä¸æµ‹è¯•

**ç›®çš„**: å®Œå–„æ–‡æ¡£å’Œæµ‹è¯•

- [ ] T032 [P] å®Œå–„ quickstart.md ä¸­çš„é…ç½®ç¤ºä¾‹
- [ ] T033 [P] æ·»åŠ å•å…ƒæµ‹è¯•: LongConnectionPlatform æ¥å£
- [ ] T034 [P] æ·»åŠ å•å…ƒæµ‹è¯•: LongConnectionRegistry æ³¨å†Œæœºåˆ¶
- [ ] T035 [P] æ·»åŠ å•å…ƒæµ‹è¯•: FeishuSkill é…ç½®è§£æ
- [ ] T036 è¿è¡Œ quickstart.md éªŒè¯
- [ ] T037 æ·»åŠ é”™è¯¯å¤„ç†è¾¹ç•Œæƒ…å†µ (API ä¸å¯ç”¨, æ¶ˆæ¯è¿‡é•¿, å¤„ç†è¶…æ—¶)

---

## ä¾èµ–ä¸æ‰§è¡Œé¡ºåº

### é˜¶æ®µä¾èµ–

- **æ¡†æ¶ (é˜¶æ®µ 1)**: æ— ä¾èµ– - å¯ç«‹å³å¼€å§‹
- **Agent é›†æˆ (é˜¶æ®µ 2)**: ä¾èµ–äºæ¡†æ¶å®Œæˆ
- **Skill åŸºç¡€ (é˜¶æ®µ 3)**: ä¾èµ–äºæ¡†æ¶å®Œæˆ
- **ç”¨æˆ·æ•…äº‹ (é˜¶æ®µ 4-7)**: ä¾èµ–äº Skill åŸºç¡€å®Œæˆ
- **å¯æ’æ‹”æ€§ (é˜¶æ®µ 8)**: ä¾èµ–äº Agent é›†æˆå®Œæˆ
- **å®Œå–„ (é˜¶æ®µ 9)**: ä¾èµ–äºæ‰€æœ‰ç”¨æˆ·æ•…äº‹å®Œæˆ

### ç”¨æˆ·æ•…äº‹ä¾èµ–

- **ç”¨æˆ·æ•…äº‹ 1 (P1)**: Skill åŸºç¡€å®Œæˆåå¯å¼€å§‹
- **ç”¨æˆ·æ•…äº‹ 2-4**: å¯ä»¥å¹¶è¡Œå¼€å‘
- **ç”¨æˆ·æ•…äº‹ 5 (å¯æ’æ‹”)**: éœ€è¦ Agent é›†æˆå®ŒæˆåéªŒè¯

### å¹¶è¡Œæœºä¼š

- é˜¶æ®µ 1 ä¸­æ‰€æœ‰æ ‡è®° [P] çš„ä»»åŠ¡å¯å¹¶è¡Œè¿è¡Œ
- é˜¶æ®µ 3 ä¸­æ‰€æœ‰æ ‡è®° [P] çš„ä»»åŠ¡å¯å¹¶è¡Œè¿è¡Œ
- ç”¨æˆ·æ•…äº‹ 2-4 å¯ä»¥å¹¶è¡Œå¼€å‘

---

## å»ºè®® MVP èŒƒå›´

ä»… **ç”¨æˆ·æ•…äº‹ 1 + 5 (P1)** - åŸºç¡€å¯¹è¯ + å¯æ’æ‹”æ€§:
- å®Œæˆé˜¶æ®µ 1, 2, 3, 4, 8
- æ€»è®¡: çº¦ 30 ä¸ªä»»åŠ¡
